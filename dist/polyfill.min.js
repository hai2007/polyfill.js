/*!
 * ✔️ polyfill.js - ✔️ 为旧浏览器提供一些常用的原生新功能支持。
 * git+https://github.com/hai2007/polyfill.js.git
 *
 * author 你好2007 < https://hai2007.gitee.io/sweethome >
 *
 * version 0.1.0-beta
 *
 * Copyright (c) 2021-present hai2007 走一步，再走一步。
 * Released under the MIT license
 *
 * Date:Wed Mar 10 2021 23:06:22 GMT+0800 (GMT+08:00)
 */
(function(){"use strict";var t=function(){if(typeof window!=="undefined")return window;if(typeof global!=="undefined")return global;throw new Error("The current environment is not known!")}();function n(t){var e=typeof t;return t!=null&&(e==="object"||e==="function")}var e=Object.prototype.toString;function r(t){if(t==null){return t===undefined?"[object Undefined]":"[object Null]"}return e.call(t)}function i(t){if(!n(t)){return false}var e=r(t);return e==="[object Function]"||e==="[object AsyncFunction]"||e==="[object GeneratorFunction]"||e==="[object Proxy]"}var o=n;var u=i;var s=function(t){return Array.isArray(t)};var f=function(t,e){this.__state=e;this.__value=t;this.$$triggerEvent()};var a=function(){var t=null;var e=this.__state=="fulfilled"?0:1,n;while(this.__hocks.length>0){if(u(this.__hocks[0][e])){t=this.__hocks.shift();break}else if(u(this.__hocks[0][2])){this.__hocks[0][2]()}this.__hocks.shift()}if(t!==null){var r=t[e](this.__value);if(o(r)&&r.constructor===this.constructor){for(var n=0;n<this.__hocks.length;n++){r.__hocks.push(this.__hocks[n]);if(r.__state!="pending")r.$$triggerEvent()}this.then=function(t,e){r.then(t,e)};this.catch=function(t){r.catch(t)};this.finally=function(t){r.finally(t)}}else{this.__value=r;this.__state="fulfilled";this.$$triggerEvent()}}};var c=function(t,e){var n=false;try{t(function(t){if(n)return;n=true;e.$$changeState(t,"fulfilled")},function(t){if(n)return;n=true;e.$$changeState(t,"rejected")})}catch(t){if(n)return;n=true;e.$$changeState(t,"rejected")}};function l(t){if(!(this instanceof l)){throw new TypeError("undefined is not a promise")}if(!u(t)){throw new TypeError("Promise resolver "+t+" is not a function")}this.__value=undefined;this.__hocks=[];this.__state="pending";c(t,this)}l.prototype.$$changeState=f;l.prototype.$$triggerEvent=a;l.prototype.then=function(t,e){this.__hocks.push([t,e,undefined]);if(this.__state!="pending"){this.$$triggerEvent()}return this};l.prototype.catch=function(t){this.__hocks.push([undefined,t,undefined]);if(this.__state!="pending"){this.$$triggerEvent()}return this};l.prototype.finally=function(t){this.__hocks.push([undefined,undefined,t]);if(this.__state!="pending"){this.$$triggerEvent()}return this};l.resolve=function(e){if(o(e)&&e.constructor===l){return e}return new l(function(t){t(e)})};l.reject=function(n){return new l(function(t,e){e(n)})};l.all=function(e){return new l(function(n,r){if(!s(e)){return r(new TypeError("undefined is not iterable (cannot read property Symbol(Symbol.iterator))"))}var i=Array.prototype.slice.call(e),o=0;var u=function(t,e){if(e.__state!=="pending"){o+=1;if(e.__state=="rejected"){r(e.__value)}else{i[t]=e.__value;if(o==i.length){n(i)}}}else{setTimeout(function(){u(t,e)})}};for(var t=0;t<i.length;t++){u(t,i[t])}})};l.allSettled=function(u){return new l(function(n,t){if(!s(u)){return t(new TypeError("undefined is not iterable (cannot read property Symbol(Symbol.iterator))"))}var r=Array.prototype.slice.call(u),i=0;var o=function(t,e){if(e.__state!=="pending"){i+=1;r[t]={status:e.__state};if(e.__state=="fulfilled"){r[t].value=e.__value}else{r[t].reason=e.__value}if(i==r.length){n(r)}}else{setTimeout(function(){o(t,e)})}};for(var e=0;e<r.length;e++){o(e,r[e])}})};l.any=function(u){return new l(function(n,r){if(!s(u)){return r(new TypeError("undefined is not iterable (cannot read property Symbol(Symbol.iterator))"))}var i=0;var o=function(t,e){if(e.__state!=="pending"){i+=1;if(e.__state=="rejected"){if(i==u.length){return r(new Error("All promises were rejected"))}}else{n(e.__value)}}else{setTimeout(function(){o(t,e)})}};for(var t=0;t<u.length;t++){o(t,u[t])}})};l.race=function(e){return new l(function(n,r){if(!s(e)){return r(new TypeError("undefined is not iterable (cannot read property Symbol(Symbol.iterator))"))}var i=function(t,e){if(e.__state!=="pending"){if(e.__state=="rejected"){r(e.__value)}else{n(e.__value)}}else{setTimeout(function(){i(t,e)})}};for(var t=0;t<e.length;t++){i(t,e[t])}})};if(!("Promise"in t)){t["Promise"]=l}})();